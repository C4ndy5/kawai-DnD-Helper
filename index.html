<!DOCTYPE html>
<html>
    <head>
        <script
            src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous">
        </script>

        <title>!!!AWESOME TRG!!!</title>
    </head>
    <body>
        <header>
            
        </header>

        <div class="main-menu">
            <div class="weapon weapon-menu-1">
                <div class="fir-menu-form">
                    <form id="weapon-1">
                        <input type="text" name="damage" placeholder="Профиль урона: ">
                        <input type="text" name="accuracy" placeholder="Точность: ">
                        <input type="text" name="shot-count" placeholder="Кол-во выстрелов: ">
                        <input type="text" name="reliability" placeholder="Надежность: ">
                        <input id="weapon-1-btn" type="button" name="shot" value="Стрелять!!!">
                    </form>
                </div>

                <div class="sec-menu-result">
                    
                </div>
            </div>
            
        </div>

        <footer>
            <script>
                function getRandomInRange(min, max) {
                    return Math.floor(Math.random() * (max - min + 1)) + min;
                }
                
                $('#weapon-1-btn').on('click', function (e) {
                    $('.sec-menu-result').html('');

                    var that = $('#weapon-1');
                    var data_read = that.serializeArray();
                    var data = {};
                    var result = [];
                    var hit;
                    var wound;
                    var count = 0;


                    
                    $.each(data_read,function(){
                        data[this.name] = this.value;
                    });

                    var shout_count = +data['shot-count'];
                    var damage = +data['damage'];
                    var accuracy = +data['accuracy'];
                    var reliability;

                    if(data['reliability'] == 'vr'){
                        reliability = 4;
                    }else if(data['reliability'] == 'st'){
                        reliability = 5;
                    }else{
                        reliability = 8;
                    }

                    while (count < shout_count){
                        hit = getRandomInRange(1, 10) + accuracy;

                        wound = damage * getRandomInRange(1, 6);

                        if (shout_count > 3 && hit < reliability){
                            $('.sec-menu-result').append($('<div>', {
                                'text': "Wedge on " + getRandomInRange(1, 6) + " rounds!!!"
                            }));
                            break;
                        }

                        result.push("hit: " + hit + " -- " + "wound: " + wound);
                        count ++;
                    }
                    count=0;
                    $.each(result,function(){

                        $('.sec-menu-result').append($('<div>', {
                            'text': count + " " + this
                        }));
                        count ++;
                    });
                })

            </script>
            
        </footer>
    </body>
<html>
